# ══════════════════════════════════════════════════
# Whitelist-based .gitignore
# デフォルト全除外 → OSS公開対象のみ許可
# ══════════════════════════════════════════════════

# Step 1: 全て除外
*

# Step 2: ディレクトリの探索を許可（中身は個別に許可）
!*/

# Step 3: OSS公開対象ファイルを許可
!.gitignore
!.gitattributes
!.gitleaks.toml
!CLAUDE.md
!LICENSE
!README.md
!README_ja.md
!CONTRIBUTING.md
!SECURITY.md

# Claude Code settings (spinner verbs only, no secrets)
!.claude/
!.claude/settings.json

# Instructions (core OSS)
!instructions/
!instructions/shogun.md
!instructions/karo.md
!instructions/ashigaru.md

# Multi-CLI: CLI-specific tool descriptions
!instructions/cli_specific/
!instructions/cli_specific/claude_tools.md
!instructions/cli_specific/codex_tools.md
!instructions/cli_specific/copilot_tools.md
!instructions/cli_specific/kimi_tools.md

# Multi-CLI: Build template parts (roles, common sections)
!instructions/roles/
!instructions/roles/*.md
!instructions/common/
!instructions/common/*.md

# Multi-CLI: Generated instruction files (built by build_instructions.sh)
!instructions/generated/
!instructions/generated/*.md

# Multi-CLI: CLI adapter library + ntfy auth
!lib/
!lib/cli_adapter.sh
!lib/ntfy_auth.sh

# Multi-CLI: Codex auto-load file
!AGENTS.md

# Setup and deployment scripts
!shutsujin_departure.sh
!first_setup.sh
!setup.sh
!install.bat

# Development tooling
!Makefile

# Git hooks (auto-regenerate on commit)
!.githooks/
!.githooks/pre-commit
!.githooks/pre-push

# Config (sample files only, no secrets)
!config/
!config/ntfy_auth.env.sample
!config/settings.yaml
!config/cli_profiles.yaml
!config/ninja_bashrc_safety.sh

# Templates
!templates/
!templates/**

# Context (knowledge files)
!context/
!context/README.md
!context/infrastructure.md
!context/doc-style-guide.md
!context/l3-robustness.md
!context/dm-signal-core.md
!context/dm-signal-ops.md
!context/dm-signal-research.md

# Scripts
!scripts/
!scripts/inbox_write.sh
!scripts/inbox_watcher.sh
!scripts/ntfy.sh
!scripts/ntfy_cmd.sh
!scripts/ntfy_listener.sh
!scripts/build_instructions.sh
!scripts/archive_completed.sh
!scripts/cmd_complete_gate.sh
!scripts/ninja_monitor.sh
!scripts/inbox_prune.sh
!scripts/review_gate.sh
!scripts/report_merge.sh
!scripts/lesson_write.sh
!scripts/lesson_check.sh
!scripts/deploy_task.sh
!scripts/cmd_absorb.sh
!scripts/sync_lessons.sh
!scripts/lesson_status_migration.sh
!scripts/lib/
!scripts/lib/cli_lookup.sh
!scripts/lib/safe_rm.sh
!scripts/inbox_archive.sh
!scripts/inbox_mark_read.sh
!scripts/model_switch_preflight.sh
!scripts/sync_pane_vars.sh
!scripts/count_gate_metrics.sh
!scripts/pending_decision_write.sh
!scripts/cmd_halt.sh
!scripts/auto_draft_lesson.sh
!scripts/lesson_review.sh
!scripts/lesson_confirm.sh
!scripts/lesson_delete.sh
!scripts/lesson_edit.sh
!scripts/clear_prep_check.sh
!scripts/backfill_knowledge_debt.sh
!scripts/gates/
!scripts/gates/gate_yaml_status.sh
!scripts/gates/gate_pd_sync.sh
!scripts/gates/gate_lesson_health.sh
!scripts/switch_project.sh
!scripts/reset_layout.sh
!scripts/restart_watchers.sh
!scripts/lesson_update_score.sh


# Tasks (SSOT lessons only)
!tasks/
!tasks/lessons.md

# SayTask (sample template only, not actual data)
!saytask/
!saytask/streaks.yaml.sample

# Docs
!docs/
!docs/philosophy.md
!docs/model-switch-checklist.md

# Screenshots (masked — no secrets)
!images/
!images/screenshots/
!images/screenshots/ntfy_saytask_rename.jpg
!images/screenshots/ntfy_cmd043_progress.jpg
!images/screenshots/ntfy_bloom_oc_test.jpg
!images/screenshots/ntfy_persona_eval_complete.jpg
!images/screenshots/ntfy_tasklist_v1_before.jpg
!images/screenshots/ntfy_tasklist_v2_aligned.jpg
!images/screenshots/ntfy_tasklist_final.jpg
!images/screenshots/tdd_ndd_rdd.png

# Skills (skill-creator only)
!skills/
!skills/skill-creator/
!skills/skill-creator/SKILL.md

# Tests
!tests/
!tests/*.bats
!tests/unit/
!tests/unit/*.bats
!tests/integration/
!tests/integration/*.bats
!tests/test_helper/
!tests/test_helper/README.md

# CI/CD
!.github/
!.github/workflows/
!.github/workflows/*.yml
