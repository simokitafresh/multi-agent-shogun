# å®¶è€é‹ç”¨æ“ä½œè©³ç´°æ‰‹é † â€” å‚ç…§å…ƒ: instructions/karo.md | cmd_383/subtask_383_impl_a | cmd_406/subtask_406_impl_b

## ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰AUTO/KAROåˆ†é›¢ï¼ˆcmd_406ï¼‰
- **AUTOåŸŸ** (`DASHBOARD_AUTO_START`ã€œ`END`): `dashboard_auto_section.sh`ãŒè‡ªå‹•ç”Ÿæˆï¼ˆå¿è€…é…å‚™/ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³/ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰ã€‚å®¶è€ã¯è§¦ã‚Œã‚‹ãª
- **KAROåŸŸ** (`KARO_SECTION_START`ã€œ`END`): å®¶è€ã®ã¿æ›´æ–°ï¼ˆé€²è¡Œä¸­/æœ€æ–°æ›´æ–°/èª¿æŸ»çµæœ/è¦å¯¾å¿œ/æˆ¦æœï¼‰
- æˆ¦æ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ãƒ¢ãƒ‡ãƒ«åˆ¥ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ãƒ»çŸ¥è­˜ã‚µã‚¤ã‚¯ãƒ«å¥å…¨åº¦ãƒ»ç¨¼åƒå¿è€…ã¯AUTOå´ã§è‡ªå‹•ã€‚æ‰‹å‹•è»¢è¨˜ä¸è¦
- `dashboard_update.sh`ã®ä¸»æ©Ÿèƒ½ï¼ˆæœ€æ–°æ›´æ–°ã‚¨ãƒ³ãƒˆãƒªè¿½åŠ ï¼‰ã¯å¾“æ¥é€šã‚ŠKAROåŸŸå†…ã«æŒ¿å…¥

## Â§1 é…å‚™ï¼ˆDeployment Checklistï¼‰
> ã‚¿ã‚¹ã‚¯é…å‚™å‰ã®å¿…é ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã€‚STEP 1-6ã‚’æ¯å›å®Ÿè¡Œã›ã‚ˆã€‚

```
STEP 0: äº”å•ãƒã‚§ãƒƒã‚¯ï¼ˆé…å‚™å‰ç¾©å‹™ã€‚STEP 1ã®å‰ã«æ¯å›å®Ÿæ–½ï¼‰
  Q1 Purpose: ã“ã®cmdã¯ä½•ã‚’é”æˆã™ã‚‹ï¼Ÿï¼ˆ1è¡Œï¼‰
  Q2 Decomposition: ã©ã†åˆ†å‰²ã™ã‚‹ï¼Ÿã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã†ï¼Ÿ
  Q3 Headcount: idleå¿è€…ã¯ä½•åï¼Ÿä½•åå¿…è¦ï¼Ÿè¶³ã‚Šã‚‹ã‹ï¼Ÿ
  Q4 Difficulty: å®šå‹(æ‰‹é †æ›¸ã‚ã‚Š)/åˆ¤æ–­è¦(è¨­è¨ˆæ±ºå®šã‚ã‚Š)/æœªçŸ¥(å‰ä¾‹ãªã—)
  Q4 Difficultyåˆ¤å®š â†’ bloom_level:
    å®šå‹(æ‰‹é †æ›¸ã‚ã‚Š) â†’ routine
    åˆ¤æ–­è¦(è¨­è¨ˆæ±ºå®šã‚ã‚Š) â†’ complex
    æœªçŸ¥(å‰ä¾‹ãªã—) â†’ complex
  Q5 Risk: æœ€æ‚ªä½•ãŒèµ·ãã‚‹ï¼Ÿå¤±æ•—ã®ã‚³ã‚¹ãƒˆã¯ï¼Ÿï¼ˆ1è¡Œï¼‰
â†’ å…¨å•ã«ç­”ãˆã¦ã‹ã‚‰ STEP 1ã¸é€²ã‚
STEP 1: idleå¿è€…ã®æ£šå¸ã—
  â†’ tmux capture-pane ã§å…¨å¿è€…ãƒšã‚¤ãƒ³ã‚’ç¢ºèªï¼ˆâ¯ã‚ã‚Š=idleï¼‰
  â†’ idleå¿è€…ã®åå‰ã¨CTXã‚’ãƒªã‚¹ãƒˆåŒ–
STEP 2: ã‚¿ã‚¹ã‚¯åˆ†å‰²ã®æœ€å¤§åŒ–
  â†’ pending cmdã®æ•°ã‚’ç¢ºèª
  â†’ å„cmdã®STEP/ACã‚’ç‹¬ç«‹å˜ä½ã«åˆ†è§£
  â†’ åˆ†è§£ã—ãŸå˜ä½æ•° = å¿…è¦å¿è€…æ•°
STEP 3: é…å‚™è¨ˆç”»ï¼ˆidleå¿è€…æ•° â‰¥ ã‚¿ã‚¹ã‚¯å˜ä½æ•°ã«ãªã‚‹ã¾ã§çµ±åˆï¼‰
  â†’ idleå¿è€… 6åã€ã‚¿ã‚¹ã‚¯å˜ä½ 4å€‹ â†’ 4åé…å‚™ï¼ˆ2åã¯æ¬¡cmdå¾…ã¡ï¼‰
  â†’ idleå¿è€… 3åã€ã‚¿ã‚¹ã‚¯å˜ä½ 6å€‹ â†’ 3åé…å‚™ï¼ˆä¾å­˜ã‚ã‚‹ã‚‚ã®ã¯blocked_byï¼‰
  â†’ idleå¿è€… 6åã€ã‚¿ã‚¹ã‚¯å˜ä½ 1å€‹ â†’ åˆ†å‰²ãŒæœ¬å½“ã«ä¸å¯èƒ½ã‹å†æ¤œè¨
STEP 4: çŸ¥è­˜è‡ªå‹•æ³¨å…¥(deploy_task.shãŒè‡ªå‹•å‡¦ç†)
  â†’ deploy_task.shãŒé…å‚™æ™‚ã«task YAMLã®project/title/descriptionã‹ã‚‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡ºã—ã€
    projects/{id}/lessons.yamlã¨ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ç…§åˆã—ã¦ä¸Šä½5ä»¶ã‚’related_lessonsã«è‡ªå‹•æ³¨å…¥ã€‚
    å®¶è€ãŒrelated_lessonsã‚’æ‰‹å‹•è¨˜è¼‰ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚
    ãŸã ã—descriptionã¸ã®é–¢é€£æ•™è¨“ãƒã‚¤ãƒ³ã‚¿ã¯å¼•ãç¶šãæ¨å¥¨ï¼ˆå†—é•·ãªå®‰å…¨ç¶²ï¼‰ã€‚
  â†’ å¿è€…ã®ã€Œèª­ã¿å¿˜ã‚Œã€ã‚’æ§‹é€ çš„ã«æ’é™¤
STEP 5: é…å‚™å®Ÿè¡Œ
  â†’ 5a: Read queue/tasks/{ninja_name}.yaml
  â†’ 5b: Write/Edit queue/tasks/{ninja_name}.yaml
  â†’ 5c: inbox_write â†’ stop
STEP 5.5: åµå¯Ÿã‚²ãƒ¼ãƒˆ(deploy_task.shãŒè‡ªå‹•å¼·åˆ¶ â€” implã‚¿ã‚¹ã‚¯æ™‚ã®ã¿)
  â†’ deploy_task.shãŒtask_type=implementã®é…å‚™æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯:
    a. shogun_to_karo.yamlã« scout_exempt: true â†’ PASSï¼ˆåµå¯Ÿå…é™¤ï¼‰
    b. åŒä¸€parent_cmdã®scout/reconã‚¿ã‚¹ã‚¯ãŒdone 2ä»¶ä»¥ä¸Š â†’ PASSï¼ˆåµå¯Ÿæ¸ˆã¿ï¼‰
    c. ã©ã¡ã‚‰ã‚‚ãªã— â†’ BLOCK(exit 1) + ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  â†’ BLOCKæ™‚: å°†è»ã«scout_exemptç”³è«‹ã™ã‚‹ã‹ã€å…ˆã«åµå¯Ÿã‚’é…å‚™ã›ã‚ˆ
  â†’ å®¶è€ã«scout_exemptå…é™¤ã®åˆ¤æ–­æ¨©ã¯ãªã„ï¼ˆå°†è»ã®ã¿ï¼‰
  â†’ scout/recon/reviewã‚¿ã‚¹ã‚¯è‡ªä½“ã®é…å‚™ã¯ã‚²ãƒ¼ãƒˆå¯¾è±¡å¤–ï¼ˆç„¡æ¡ä»¶PASSï¼‰
STEP 6: é…å‚™å¾Œãƒã‚§ãƒƒã‚¯(ã‚¹ã‚¯ãƒªãƒ—ãƒˆå¼·åˆ¶ â€” åµå¯Ÿã‚¿ã‚¹ã‚¯æ™‚ã®ã¿)
  â†’ bash scripts/task_deploy.sh cmd_XXX recon
  â†’ exit 0ä»¥å¤– â†’ 2åä½“åˆ¶ã«ä¿®æ­£ã™ã‚‹ã¾ã§é…å‚™ã‚„ã‚Šç›´ã—
  â†’ åµå¯Ÿä»¥å¤–ã®task_type(implement/review/other)ã¯ã‚¹ã‚­ãƒƒãƒ—
```

### cmdèµ·ç¥¨æ™‚ã®fixesè¨˜å…¥ãƒ«ãƒ¼ãƒ«

- positive_rule: "cmdèµ·ç¥¨æ™‚ã«ã€æ—¢å­˜cmdã®æˆæœç‰©ã®ä¿®æ­£ã§ã‚ã‚Œã°fixes: cmd_XXXã‚’è¨˜å…¥ã›ã‚ˆ"
- reason: "æ‰‹æˆ»ã‚Šç‡ãŒå“è³ªã®çœŸã®æŒ‡æ¨™ã€‚è¨˜å…¥ãŒãªã‘ã‚Œã°è¨ˆæ¸¬ã§ããªã„"
- åˆ¤æ–­åŸºæº–:
  - æ—¢å­˜cmdæˆæœç‰©ã®ãƒã‚°ãƒ»ä¸å…·åˆä¿®æ­£ãŒå¿…è¦: `fixes: cmd_XXX`
  - æ©Ÿèƒ½è¿½åŠ ãƒ»æ”¹å–„ãƒ»æ–°è¦é–‹ç™º: `fixes`ã¯ç©ºæ–‡å­—ã¾ãŸã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãªã—
  - åˆ¤æ–­ã«è¿·ã†å ´åˆ: `fixes`ãªã—ï¼ˆå½é™½æ€§ã‚ˆã‚Šå½é™°æ€§ã‚’å„ªå…ˆï¼‰

## Â§2 åˆ†è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆTask Decomposition Patternsï¼‰
> cmdå—é ˜æ™‚ã®5ãƒ‘ã‚¿ãƒ¼ãƒ³å³æ™‚åˆ†è§£æ‰‹é †ã€‚æ¯å›ã‚¼ãƒ­ã‹ã‚‰è€ƒãˆã‚‹ãªã€‚

### cmdãƒ•ãƒ©ã‚°3åˆ†å²ï¼ˆå°†è»ãŒcmd YAMLã«æ˜ç¤ºï¼‰

| ãƒ•ãƒ©ã‚° | æ„å‘³ | å®¶è€ã®å¯¾å¿œ |
|--------|------|-----------|
| `scout_exempt: true` | åµå¯Ÿçœç•¥ã€‚ä»•æ§˜ãŒæ˜ç¢ºã§ç›´æ¥å®Ÿè£…å¯ | implã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®ã¿ä½œæˆãƒ»é…å‚™ |
| `scout_only: true` | åµå¯Ÿã®ã¿ã€‚æƒ…å ±åé›†ãŒç›®çš„ | scoutã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®ã¿ä½œæˆãƒ»é…å‚™ã€‚implä¸è¦ |
| ã©ã¡ã‚‰ã‚‚ãªã— | ãƒ•ãƒ«ãƒ•ãƒ­ãƒ¼ | å…¨ãƒ•ã‚§ãƒ¼ã‚º(scout+impl+review)ã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’äº‹å‰ä¸€æ‹¬ä½œæˆ |

**åˆ¤æ–­æ¨©**: å®¶è€ã«scout_exempt/scout_onlyã®åˆ¤æ–­æ¨©ã¯ãªã„ã€‚å°†è»ãŒç™ºä»¤æ™‚ã«æ˜ç¤ºã™ã‚‹ã€‚

### Pattern Selection Flow
```
cmdå—é ˜ â†’ ã¾ãšcmdãƒ•ãƒ©ã‚°ã‚’ç¢ºèª:
  â”œâ”€ scout_exempt: true â†’ åµå¯Ÿçœç•¥ã€‚ç›´æ¥å®Ÿè£…ã¸
  â”œâ”€ scout_only: true  â†’ åµå¯Ÿã®ã¿ã€‚implãƒ•ã‚§ãƒ¼ã‚ºãªã—ï¼ˆåµå¯Ÿå®Œäº†=cmdå®Œäº†ï¼‰
  â””â”€ ã©ã¡ã‚‰ã‚‚ãªã—     â†’ ãƒ•ãƒ«ãƒ•ãƒ­ãƒ¼ï¼ˆåµå¯Ÿâ†’å®Ÿè£…â†’ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
ãƒ•ãƒ«ãƒ•ãƒ­ãƒ¼æ™‚ â†’ ã€Œã“ã®cmdã¯ã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ„åˆã›ã‹ï¼Ÿã€
  â”œâ”€ èª¿æŸ»ãŒå¿…è¦ã‹ï¼Ÿ â†’ YES â†’ recon(2å) + å¾Œç¶šãƒ‘ã‚¿ãƒ¼ãƒ³
  â”œâ”€ è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²å¯èƒ½ã‹ï¼Ÿ â†’ YES â†’ impl_parallel(Nå)
  â”œâ”€ å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«/å¯†çµåˆã‹ï¼Ÿ â†’ YES â†’ impl(1å)
  â”œâ”€ ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚ã‚Šï¼Ÿ â†’ YES â†’ review(1å)è¿½åŠ 
  â””â”€ è¤‡æ•°æˆæœç‰©ã®çµ±åˆå¿…è¦ï¼Ÿ â†’ YES â†’ integrate(1å)è¿½åŠ 
ä¾‹: recon(2å) â†’ impl_parallel(2å) â†’ review(åµå¯Ÿè€…1å)
```

### 5 Patterns Summary

| # | Pattern | äººæ•° | ç‰¹å¾´ | ä½¿ç”¨ä¾‹ |
|---|---------|------|------|--------|
| 1 | recon (åµå¯Ÿ) | 2å | ç‹¬ç«‹ä¸¦è¡Œã€åŒã˜å¯¾è±¡ | æœªçŸ¥é ˜åŸŸã®èª¿æŸ»ã€ä»®èª¬æ¤œè¨¼ |
| 2 | impl (å®Ÿè£…_å˜ç‹¬) | 1å | å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«orå¯†çµåˆ | ãƒã‚°ä¿®æ­£ã€å°è¦æ¨¡æ©Ÿèƒ½è¿½åŠ  |
| 3 | impl_parallel (å®Ÿè£…_ä¸¦åˆ—) | Nå | å„è‡ªãŒåˆ¥ãƒ•ã‚¡ã‚¤ãƒ« | å¤§è¦æ¨¡æ”¹ä¿®ã€è¤‡æ•°æ©Ÿèƒ½ä¸¦è¡Œ |
| 4 | review (ãƒ¬ãƒ“ãƒ¥ãƒ¼) | 1å | å®Ÿè£…è€…ä»¥å¤–ãŒæ¤œè¨¼ | ã‚³ãƒ¼ãƒ‰å“è³ªã€pushå‰ç¢ºèª |
| 5 | integrate (çµ±åˆ) | 1å | blocked_byè¤‡æ•°ã‚¿ã‚¹ã‚¯ | åµå¯Ÿçµ±åˆã€æˆæœç‰©ãƒãƒ¼ã‚¸ |

### Subtask Naming Conventionï¼ˆ4åˆ†é¡ï¼‰

| åˆ†é¡ | å‘½åãƒ‘ã‚¿ãƒ¼ãƒ³ | å†…å®¹ |
|------|-------------|------|
| scout | subtask_XXX_scout_* | ã‚³ãƒ¼ãƒ‰èª¿æŸ»ãƒ»æ§‹é€ åˆ†æ |
| impl | subtask_XXX_impl_* | å®Ÿè£…ãƒ»ã‚³ãƒ¼ãƒ‰å¤‰æ›´ |
| review | subtask_XXX_review_* | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| design | subtask_XXX_design_* | åˆè­°ãƒ»è¨­è¨ˆ |

### Pattern Detailsï¼ˆ5ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°ï¼‰

**1. recon (åµå¯Ÿ)** â€” `task_type: recon`
- 2åç‹¬ç«‹ä¸¦è¡Œã€‚åŒã˜å¯¾è±¡ã‚’ç•°ãªã‚‹è¦³ç‚¹ã§èª¿æŸ»
- å®Œäº†å¾Œ `report_merge.sh` ã§çµ±åˆåˆ¤å®š
- ä»®èª¬A/Bå¯„ã‚Šã®è¦³ç‚¹ã§ç‹¬ç«‹èª¿æŸ»ã€ä¸¡æ–¹ã«å…¨ä»®èª¬ã‚’ç¶²ç¾…ã•ã›ã‚‹
- ä¾‹å¤–: äº‹å‰çŸ¥è­˜ååˆ† or idle geninå¿è€…1åã®ã¿ â†’ ã‚¹ã‚­ãƒƒãƒ—å¯

**2. impl (å®Ÿè£…_å˜ç‹¬)** â€” `task_type: implement`
- 1åã€å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯å¯†çµåˆãªè¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«
- commitã¾ã§ï¼ˆpushã¯ã—ãªã„ï¼‰â†’ reviewé…å‚™

**3. impl_parallel (å®Ÿè£…_ä¸¦åˆ—)** â€” `task_type: implement`
- Nåã€å„è‡ªãŒåˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã€‚**åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¤‡æ•°å¿è€…ãŒè§¦ã‚‹ã“ã¨ç¦æ­¢**ï¼ˆRACE-001ï¼‰
- å„å¿è€…ã«æ˜ç¢ºãªæ‹…å½“ãƒ•ã‚¡ã‚¤ãƒ«/é ˜åŸŸã‚’æŒ‡å®š
- å…¨å“¡å®Œäº†å¾Œã«review or integrateã§å“è³ªç¢ºèª

**4. review (ãƒ¬ãƒ“ãƒ¥ãƒ¼)** â€” `task_type: review`
- 1åã€diffç¢ºèª + PASSåˆ¤å®š + push
- **å®Ÿè£…è€…â‰ ãƒ¬ãƒ“ãƒ¥ãƒ¼è€…ï¼ˆå¿…é ˆï¼‰**ã€‚ä¿®æ­£è€…â‰ ãƒ¬ãƒ“ãƒ¥ãƒ¼è€…ã‚‚åŒæ§˜
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¹ã‚¯ã¯å¿è€…ã«é…å‚™ã›ã‚ˆã€‚å®¶è€ã®å½¹å‰²ã¯é…å‚™ã¨GATEåˆ¤å®šã®ã¿

**5. integrate (çµ±åˆ)** â€” `task_type: integrate`
- 1åã€`blocked_by: [subtask_A, subtask_B, ...]`
- åµå¯Ÿçµ±åˆã¯ `report_merge.sh` â†’ çµ±åˆåˆ†æã®2æ®µéš
- `templates/integ_*.md` å‚ç…§

### Review Assignment Rules

| æ¡ä»¶ | æ‹…å½“ | ç†ç”± |
|------|------|------|
| åµå¯Ÿæ¸ˆã¿ + åˆ¥å¿è€…ãŒå®Ÿè£… | **åµå¯Ÿè€…**ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ | ã‚³ãƒ¼ãƒ‰çŸ¥è­˜ãŒæœ€ã‚‚æ·±ã„ |
| åµå¯Ÿè€… = å®Ÿè£…è€… | **åˆ¥å¿è€…** | ç‹¬ç«‹æ€§ç¢ºä¿ |
| ã‚¿ã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«ï¼ˆå…¨ãƒ¬ãƒ™ãƒ«å…±é€šï¼‰ | **å…¨å¿è€…å€™è£œ** | 2026-02-27æ®¿è£å®š: ãƒ©ãƒ³ãƒ€ãƒ é…å‚™ |
| åµå¯Ÿå ±å‘Šã‚ã‚Š | reports_to_readã§è‡ªå‹•æ³¨å…¥ | çŸ¥è­˜ã®å¼•ãç¶™ãä¿è¨¼ |

### Common Combinations

| çµ„åˆã› | ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ | é©ç”¨å ´é¢ |
|--------|------------|---------|
| åµå¯Ÿâ†’å®Ÿè£…â†’ãƒ¬ãƒ“ãƒ¥ãƒ¼ | recon(2) â†’ impl(1) â†’ review(1) | æœªçŸ¥ãƒã‚°èª¿æŸ»â†’ä¿®æ­£â†’æ¤œè¨¼ |
| ä¸¦åˆ—å®Ÿè£…â†’ãƒ¬ãƒ“ãƒ¥ãƒ¼ | impl_parallel(N) â†’ review(1) | è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«åŒæ™‚æ”¹ä¿® |
| å®Ÿè£…â†’ãƒ¬ãƒ“ãƒ¥ãƒ¼ | impl(1) â†’ review(1) | å˜ç´”æ©Ÿèƒ½è¿½åŠ  |
| åµå¯Ÿâ†’ä¸¦åˆ—å®Ÿè£…â†’çµ±åˆ | recon(2) â†’ impl_parallel(N) â†’ integrate(1) | å¤§è¦æ¨¡æ©Ÿèƒ½é–‹ç™º |
| å®Ÿè£…ã®ã¿ | impl(1) | æ©Ÿæ¢°çš„å¤‰æ›´ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼çœç•¥å¯ï¼‰ |

### ã‚µãƒ–ã‚¿ã‚¹ã‚¯YAMLäº‹å‰ä¸€æ‹¬ä½œæˆãƒ«ãƒ¼ãƒ«ï¼ˆcmd_367è¿½åŠ ï¼‰
> cmdå—é ˜æ™‚ã«å…¨ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯YAMLã‚’ä¸€æ‹¬äº‹å‰ä½œæˆã€‚auto_deploy_next.shã®å‰ææ¡ä»¶ã€‚

```
1. cmdå—é ˜ â†’ Pattern Selection Flowã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ±ºå®š
   ä¾‹: recon(2) â†’ impl(1) â†’ review(1)
2. å…¨ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯YAMLã‚’åŒæ™‚ã«ä½œæˆ
   - subtask_XXX_scout_a.yaml  â†’ status: pendingï¼ˆå³æ™‚deploy_task.shï¼‰
   - subtask_XXX_scout_b.yaml  â†’ status: pendingï¼ˆå³æ™‚deploy_task.shï¼‰
   - subtask_XXX_impl_a.yaml   â†’ status: pending, blocked_by: [scout_a, scout_b], auto_deploy: true
   - subtask_XXX_review_a.yaml â†’ status: pending, blocked_by: [impl_a], auto_deploy: true
3. åµå¯Ÿã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®ã¿å³åº§ã«deploy_task.shã§é…å‚™
   å¾Œç¶šãƒ•ã‚§ãƒ¼ã‚ºã¯auto_deploy_next.shãŒè‡ªå‹•é…å‚™ã™ã‚‹
```

#### å¾Œç¶šãƒ•ã‚§ãƒ¼ã‚ºã®å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å€¤ | ç†ç”± |
|-----------|-----|------|
| blocked_by | [å‰ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯IDä¸€è¦§] | ä¾å­˜é–¢ä¿‚ã‚’auto_deploy_next.shãŒå‚ç…§ |
| auto_deploy | true | å‰ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ã®è‡ªå‹•é…å‚™ãƒˆãƒªã‚¬ãƒ¼ |
| status | pending | é…å‚™å¾…ã¡çŠ¶æ…‹ |
| assigned_to | ï¼ˆç©ºã¾ãŸã¯æœªæŒ‡å®šï¼‰ | auto_deployæ™‚ã«idleå¿è€…ã«å‰²å½“ |

`scout_only: true` ã®å ´åˆã¯implã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®äº‹å‰ä½œæˆä¸è¦ã€‚
**ãªãœäº‹å‰ä½œæˆãŒå¿…è¦ã‹**: auto_deploy_next.shã¯æ—¢å­˜YAMLã®blocked_byã‚’è§£æ±ºã™ã‚‹ä»•çµ„ã¿ã€‚YAMLãŒå­˜åœ¨ã—ãªã‘ã‚Œã°ã€Œå¾Œç¶šã‚¿ã‚¹ã‚¯ãªã—ã€ã¨åˆ¤æ–­ã—åœæ­¢ã™ã‚‹ã€‚å®¶è€ã®/clearã‚„idleåŒ–ã§åµå¯Ÿâ†’å®Ÿè£…ã®æ¥ç¶šãŒé€”åˆ‡ã‚Œã‚‹å•é¡Œã®æ ¹æœ¬å¯¾ç­–ã€‚

## Â§3 ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ã‚¯ãƒ«
> å®Ÿè£…å®Œäº†å¾Œã®ãƒ¬ãƒ“ãƒ¥ãƒ¼â†’ä¿®æ­£â†’å†ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ«ãƒ¼ãƒ—ã€‚å®¶è€ã®å½¹å‰²ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼é…å‚™+GATEåˆ¤å®šã®ã¿ã€‚

```
å®Ÿè£…å®Œäº†(å¿è€…A) â†’ å®¶è€ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼é…å‚™(å¿è€…B) â†’ å¿è€…Bãƒ¬ãƒ“ãƒ¥ãƒ¼
  â”œâ”€ LGTM(æŒ‡æ‘˜ãªã—) â†’ GATEåˆ¤å®šã«é€²ã‚€
  â””â”€ æŒ‡æ‘˜ã‚ã‚Š â†’ å®¶è€ãŒä¿®æ­£é…å‚™(å¿è€…C) â†’ å¿è€…Cä¿®æ­£
       â†’ å®¶è€ãŒå†ãƒ¬ãƒ“ãƒ¥ãƒ¼é…å‚™(å¿è€…D) â†’ å¿è€…Dãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ (ãƒ«ãƒ¼ãƒ—)
```

| ãƒ«ãƒ¼ãƒ« | å†…å®¹ | reason |
|--------|------|--------|
| å®Ÿè£…è€…â‰ ãƒ¬ãƒ“ãƒ¥ãƒ¼è€… | å¿è€…AãŒå®Ÿè£… â†’ å¿è€…B(â‰ A)ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ | è‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ã¯è‡ªåˆ†ã§è¦‹è½ã¨ã™ |
| ä¿®æ­£è€…â‰ å†ãƒ¬ãƒ“ãƒ¥ãƒ¼è€… | å¿è€…CãŒä¿®æ­£ â†’ å¿è€…D(â‰ C)ãŒå†ãƒ¬ãƒ“ãƒ¥ãƒ¼ | ç¢ºè¨¼ãƒã‚¤ã‚¢ã‚¹é˜²æ­¢ |
| å®¶è€ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼é…å‚™ç¾©å‹™ | å“è³ªåˆ¤å®šã¯å¿è€…ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«å§”ã­ã‚ˆ | å®¶è€ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã¨æ•™è¨“ãŒç”Ÿã¾ã‚Œãªã„ |
| ãƒ«ãƒ¼ãƒ—çµ‚äº†æ¡ä»¶ | ãƒ¬ãƒ“ãƒ¥ãƒ¼è€…ãŒLGTM(æŒ‡æ‘˜ãªã—)ã‚’å ±å‘ŠYAMLã«è¨˜è¼‰ | æ˜ç¤ºçš„LGTMãªã—ã ã¨GATEãŒæ©Ÿèƒ½ã—ãªã„ |
| ä¿®æ­£è€…ã®é¸æŠ | å…ƒã®å®Ÿè£…è€…(å¿è€…A)ã®å†èµ·ç”¨å¯ã€‚ãŸã ã—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯å¿…ãšåˆ¥å¿è€… | å®Ÿè£…è€…ã¯æœ€ã‚‚æ–‡è„ˆã‚’æŒã¤ä¿®æ­£è€… |

#### ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¹ã‚¯YAMLå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- `task_type: review` / `description`: ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ï¼ˆACå……è¶³+ã‚³ãƒ¼ãƒ‰å“è³ªï¼‰ / `target_path`: å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
- å ±å‘Šå½¢å¼: `review_result: PASS or FAIL` + å„ACã®PASS/FAILåˆ¤å®š

#### ä¿®æ­£ã‚¿ã‚¹ã‚¯YAMLå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- `task_type: implement` / `description`: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜äº‹é …ï¼ˆè¡Œç•ªå·+ä¿®æ­£å†…å®¹ï¼‰
- `blocked_by`ä¸è¦ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼å ±å‘Šã‚’å®¶è€ãŒdescriptionã«è»¢è¨˜ï¼‰

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼è‡ªå‹•é…å‚™ï¼ˆAC3å¯¾å¿œ â€” pushå ±å‘Šå—ç†æ™‚ã«æ¯å›ç¢ºèªï¼‰
å¿è€…ã®å ±å‘Šã«git commit(pushå‰)ãŒå«ã¾ã‚Œã‚‹å ´åˆ:
1. å ±å‘Šã«commitãƒãƒƒã‚·ãƒ¥ãŒã‚ã‚‹ã‹ç¢ºèª
2. pushæ¸ˆã¿ â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼çœç•¥æ¸ˆã¿ã§ãªã„ã‹ç¢ºèªã€‚çœç•¥ç†ç”±ãªãå ´åˆã¯ğŸš¨å ±å‘Š
3. commitæ¸ˆã¿+pushæœª â†’ åˆ¥å¿è€…ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•é…å‚™ï¼ˆdiffç¢ºèª+æ§‹æ–‡ãƒã‚§ãƒƒã‚¯+pushï¼‰
4. ãƒ¬ãƒ“ãƒ¥ãƒ¼PASS â†’ pushå®Œäº† â†’ æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚€
5. æ©Ÿæ¢°çš„å¤‰æ›´(typo/importè¿½åŠ ç­‰)ã¯å®¶è€åˆ¤æ–­ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼çœç•¥å¯
6. ãƒ¬ãƒ“ãƒ¥ãƒ¼FAIL â†’ ä¿®æ­£ã‚¿ã‚¹ã‚¯é…å‚™ â†’ å†ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ LGTMã¾ã§ãƒ«ãƒ¼ãƒ—
7. å“è³ªåˆ¤å®šã¯å¿è€…ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«å§”ã­ã‚ˆã€‚å®¶è€ã®å½¹å‰²ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¹ã‚¯ã®é…å‚™ã¨GATEåˆ¤å®šã®ã¿

## Â§4 é›£å•ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
> å¤±æ•—ã—ãŸæ™‚ã®å¢—å“¡åŸå‰‡ã€‚åµå¯Ÿ2åä¸¦è¡Œï¼ˆäºˆé˜²æªç½®ï¼‰ã¨ã¯åˆ¥åŸå‰‡ï¼ˆå¤±æ•—ã‹ã‚‰ã®å­¦ç¿’å¢—å¹…ï¼‰ã€‚

### åŸºæœ¬ã®å‹
```
1åã§ç€æ‰‹ â†’ æˆåŠŸãªã‚‰æ¬¡ã¸
1åã§å¤±æ•— â†’ åŒä¸€ã‚¿ã‚¹ã‚¯ã‚’2åã«ä¸¸ã”ã¨ç‹¬ç«‹ã§æŒ¯ã‚‹ â†’ çŸ¥è¦‹çµ±åˆ â†’ å†æŒ‘æˆ¦
```

| # | åŸå‰‡ | ç†ç”± |
|---|------|------|
| 1 | 2åã«ã¯**åŒã˜ã‚¿ã‚¹ã‚¯èª¬æ˜**ã‚’æ¸¡ã™ | åµå¯Ÿã¨åŒã˜ã€Œç‹¬ç«‹ä¸¦è¡Œã€åŸå‰‡ |
| 2 | å¤±æ•—ã‚‚çŸ¥è¦‹ã€‚äº‹å‰ã®çŸ¥è¦‹å…±æœ‰ã¯ä¸è¦ | 1åç›®ã®å ±å‘Šã‚’2åç›®ã«è¦‹ã›ãªã„ï¼ˆç‹¬ç«‹æ€§æ‹…ä¿ï¼‰ |
| 3 | ç„¡é§„ã¨ã¯**ãƒªã‚½ãƒ¼ã‚¹ã®é‡è¤‡**ã§ã¯ãªã**æ™‚é–“ã‚’ç„¡é§„ã«ã™ã‚‹ã“ã¨** | 2åæŠ•å…¥ã¯é‡è¤‡ã§ã¯ãªãä¿é™º |
| 4 | idleå¿è€… = éŠä¼‘è³‡ç”£ = **æå¤±** | ä½¿ã‚ãªã„ã“ã¨ãŒæœ€å¤§ã®ç„¡é§„ |

### åµå¯Ÿ2åä¸¦è¡Œã¨ã®é•ã„

| | åµå¯Ÿ2åä¸¦è¡Œ | é›£å•ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
|---|-----------|-------------------|
| ã‚¿ã‚¤ãƒŸãƒ³ã‚° | **åˆå›ã‹ã‚‰2å** | **å¤±æ•—å¾Œã«2å** |
| ç†ç”± | æœªçŸ¥é ˜åŸŸã¯æœ€åˆã‹ã‚‰ç›²ç‚¹ãƒªã‚¹ã‚¯ãŒé«˜ã„ | ã¾ãš1åã§è©¦ã—ã€è§£ã‘ãªã‘ã‚Œã°å¢—å“¡ |
| å…±é€šåŸå‰‡ | åŒä¸€ã‚¿ã‚¹ã‚¯ã‚’ç‹¬ç«‹ã§ | åŒä¸€ã‚¿ã‚¹ã‚¯ã‚’ç‹¬ç«‹ã§ |
| çµ±åˆ | report_merge.sh â†’ çµ±åˆåˆ†æ | åŒå·¦ |

### é©ç”¨åˆ¤å®šãƒ•ãƒ­ãƒ¼
```
ã‚¿ã‚¹ã‚¯å¤±æ•—ã®å ±å‘Šã‚’å—é ˜
  â”œâ”€ åŸå› ãŒæ˜ç¢ºï¼ˆç’°å¢ƒãƒ»è¨­å®šãƒ»ä¸€æ™‚éšœå®³ï¼‰ï¼Ÿ â†’ ä¿®æ­£ã—ã¦åŒä¸€å¿è€…ã«å†é…å‚™
  â”œâ”€ åŸå› ä¸æ˜ or è¤‡é›‘ï¼Ÿ â†’ â˜…ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 2åã«åŒä¸€ã‚¿ã‚¹ã‚¯ã‚’ç‹¬ç«‹é…å‚™
  â””â”€ idleå¿è€…ãŒ0åï¼Ÿ â†’ ç¨¼åƒä¸­ã‚¿ã‚¹ã‚¯å®Œäº†ã‚’å¾…ã£ã¦ã‹ã‚‰ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```
æ³¨æ„: ã“ã®åŸå‰‡ã¯ashigaru.mdã«ã¯æ›¸ã‹ãªã„ã€‚**å®¶è€ã®é…å‚™åˆ¤æ–­**ã§ã‚ã‚Šå¿è€…ã®è¡Œå‹•è¦ç¯„ã§ã¯ãªã„ã€‚

## Â§5 æ•™è¨“æŠ½å‡ºï¼ˆLessons Extractionï¼‰
> cmdå®Œäº†æ™‚ã«å¾—ãŸçŸ¥è¦‹ã‚’lessons.yamlã¸æ°¸ç¶šåŒ–ã€‚Step 11.7é€šçŸ¥å¾Œãƒ»Step 12ãƒšã‚¤ãƒ³ãƒªã‚»ãƒƒãƒˆå‰ã«å®Ÿè¡Œã€‚

### æ‰‹é †
auto_draft_lesson.shãŒå¿è€…å ±å‘Šã®lesson_candidateã‹ã‚‰draftæ•™è¨“ã‚’è‡ªå‹•ç™»éŒ²ã™ã‚‹ï¼ˆcmd_complete_gate.shå†…ã§è‡ªå‹•å®Ÿè¡Œï¼‰ã€‚å®¶è€ã¯draftæŸ»èª­ã®ã¿è¡Œã†ã€‚
```
1. bash scripts/lesson_review.sh {project_id} ã§draftä¸€è¦§ã‚’ç¢ºèª
2. å„draftã«å¯¾ã—ã¦ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’å®Ÿæ–½:
   - confirm: bash scripts/lesson_confirm.sh {project_id} {lesson_id}
   - edit:    bash scripts/lesson_edit.sh {project_id} {lesson_id} "{new_title}" "{new_detail}"
   - delete:  bash scripts/lesson_delete.sh {project_id} {lesson_id}
3. å®¶è€è‡ªèº«ã®è¦³å¯ŸãŒã‚ã‚‹å ´åˆã®ã¿æ‰‹å‹•è¿½åŠ :
   bash scripts/lesson_write.sh {project_id} "{title}" "{detail}" "{source_cmd}" "karo"
4. å…¨draftå‡¦ç†å¾Œã€cmd_complete_gate.sh {cmd_id} ãŒdraftæ®‹å­˜ãƒã‚§ãƒƒã‚¯
   draftæ®‹å­˜ â†’ GATE BLOCK / draft ã‚¼ãƒ­ â†’ GATE CLEAR
```

### æ›¸ãæ–¹ã®åŸºæº–

| æ›¸ãã¹ã | æ›¸ã‹ãªãã¦ã‚ˆã„ |
|---------|--------------|
| ãƒãƒã£ãŸå•é¡Œã¨è§£æ±ºç­– | ã€Œãƒ†ã‚¹ãƒˆã¯å¤§äº‹ã€çš„ãªä¸€èˆ¬è«– |
| å‰æãŒæƒ³å®šã¨é•ã£ãŸäº‹å®Ÿ | ã‚¿ã‚¹ã‚¯å›ºæœ‰ã®ä¸€æ™‚æƒ…å ± |
| æ¤œè¨¼æ‰‹æ³•ã®é¸æŠç†ç”±ã¨çµæœ | çµæœã®æ•°å€¤ï¼ˆå®šé‡ãƒ•ã‚¡ã‚¯ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ï¼‰ |
| DB/API/ãƒ„ãƒ¼ãƒ«ã®æ³¨æ„ç‚¹ | ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã®è©³ç´°ï¼ˆå ±å‘ŠYAMLã«ï¼‰ |
| æ®¿ã®æ–¹é‡ãƒ»æ€æƒ³ã®è¨€èªåŒ– | æ—¢ã«CLAUDE.mdã«æ›¸ã„ã¦ã‚ã‚‹ãƒ«ãƒ¼ãƒ« |

lessonsãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æˆ: `1.æˆ¦ç•¥å“²å­¦` / `2.æ¤œè¨¼æ‰‹æ³•` / `3.ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«çŸ¥è¦‹` / `4.å®šé‡ãƒ•ã‚¡ã‚¯ãƒˆ` / `5.ãƒ—ãƒ­ã‚»ã‚¹æ•™è¨“`

### æˆ¦ç•¥æ•™è¨“ã®æ˜‡æ ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆMCPæ˜‡æ ¼ï¼‰

| ãƒ¬ãƒ™ãƒ« | åŸºæº– | ä¾‹ |
|--------|------|-----|
| tactical | å®Ÿè£…è©³ç´°ãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ„ãƒ¼ãƒ«ã®æ³¨æ„ç‚¹ | SQLiteã¨PostgreSQLã®æŒ™å‹•å·® |
| strategic | æˆ¦ç•¥åˆ¤æ–­ãƒ»å“²å­¦ãƒ»è¨­è¨ˆåŸå‰‡ã«é–¢ã‚ã‚‹ | ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°æ¤œè¨¼æ–¹é‡ |

#### åˆ¤å®šã«è¿·ã†ã‚±ãƒ¼ã‚¹ã®åŸºæº–

| ã‚«ãƒ†ã‚´ãƒª | åˆ¤å®š | ç†ç”± |
|---------|------|------|
| æ®¿ã®æŠ•è³‡å“²å­¦ã«é–¢ã‚ã‚‹ | strategic | MCP Memoryã«å°†è»ã®è£å®šã¨ã—ã¦ä¿å­˜ã™ã¹ã |
| å…¨PJå…±é€šã®é‹ç”¨åŸå‰‡ | strategic | å°†è»ãŒé‹ç”¨æŒ‡ä»¤ã¨ã—ã¦ç™ºä»¤ã™ã¹ã |
| ç‰¹å®šAPI/ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æŒ™å‹• | tactical | PJå†…lessons.yamlã§ååˆ† |
| DBæ¥ç¶š/ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®æ³¨æ„ | tactical | PJå†…lessons.yamlã§ååˆ† |
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ã®ç™ºè¦‹ | strategic (infra) | å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å½±éŸ¿ |

```bash
# strategicåˆ¤å®šã®å ´åˆ
bash scripts/lesson_write.sh dm-signal "æ•™è¨“ã‚¿ã‚¤ãƒˆãƒ«" "è©³ç´°" "cmd_XXX" "karo" "cmd_XXX" --strategic
```
æ˜‡æ ¼ãƒ•ãƒ­ãƒ¼: lesson_write.shå®Ÿè¡Œæ™‚ã«tactical/strategicåˆ¤å®š â†’ strategic â†’ `pending_decision_write.sh create "MCPæ˜‡æ ¼å€™è£œ: LXXX â€” {title}" ...` â†’ å°†è»ãŒMCP Memoryç™»éŒ² â†’ `pending_decision_write.sh resolve "PD-XXX" "MCPç™»éŒ²å®Œäº†"`
â˜… å°†è»ã«auto-injectionã¯ä¸è¦ã€‚å®¶è€ãŒé¸åˆ¥ã—ã¦ä¸Šã’ã‚‹ã®ãŒæŒ‡æ®ç³»çµ±ã«åˆè‡´ã€‚

### deprecationå¯©æŸ»æ‰‹é †ï¼ˆcmd_414ï¼‰

- positive_rule: "lesson_deprecation_scan.shã®å€™è£œã‚’1ä»¶ãšã¤å¯©æŸ»ã—ã€
  deprecatedåˆ¤å®šã«ã¯deprecated_reasonã‚’å¿…ãšè¨˜è¼‰ã›ã‚ˆ"
  reason: "ç†ç”±ãªãdeprecateã¯çŸ¥è­˜æ¶ˆå¤±ã¨åŒç¾©ã€‚å¾©æ´»æ™‚ã«åˆ¤æ–­ææ–™ãŒãªããªã‚‹"
- åˆ¤æ–­åŸºæº–:
  - deprecatedå¯: å…·ä½“çš„æ‰‹é †ãŒè‡ªå‹•åŒ–(gate/script)ã§ä¸è¦ã«ãªã£ãŸæ•™è¨“
  - deprecatedä¸å¯: ã€Œãªãœã€ã€ŒåŸå‰‡ã€ã‚’å«ã‚€æ•™è¨“
  - è¿·ã£ãŸã‚‰activeç¶­æŒï¼ˆå½é™½æ€§ã‚ˆã‚Šå½é™°æ€§ãŒãƒã‚·ï¼‰
- å®Ÿè¡Œ: `bash scripts/lesson_deprecate.sh <project> <lesson_id> "<reason>" <cmd_id>`
- è“„ç©ãƒˆãƒªã‚¬ãƒ¼: gate_lesson_health.shãŒæ–°è¦+10ä»¶ã§WARN â†’ å¯©æŸ»ã‚’é–‹å§‹ã›ã‚ˆ
- checkpointæ›´æ–°: å¯©æŸ»å®Œäº†å¾Œã« `queue/lesson_deprecation_checkpoint.txt` ã¸æœ€æ–°Lç•ªå·ã‚’è¨˜éŒ²

## Â§6 åˆ†å‰²å®£è¨€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
> STEP 2.5 â€” é…å‚™å‰ã«å¿…ãšå‡ºåŠ›ã€‚F006ãƒ«ãƒ¼ãƒ«ã®éµå®ˆè¨¼æ˜ã€‚

```
ã€åˆ†å‰²å®£è¨€ã€‘cmd_XXX: ACæ•°={N}, idleå¿è€…={M}å
  [Q1] Purpose: {ä¸€è¡Œ}
  [Q2] Decomposition: {ãƒ‘ã‚¿ãƒ¼ãƒ³å} â€” {åˆ†å‰²å†…å®¹}
  [Q3] Headcount: idle={M}, needed={K}, surplus={M-K}
  [Q4] Difficulty: {å®šå‹/åˆ¤æ–­è¦/æœªçŸ¥} â€” {ç†ç”±}
  [Q5] Risk: {ä¸€è¡Œ}
  F006è¨ˆç®—: min_ninja = max(2, ceil({N}/2)) = {K}
  é…å‚™è¨ˆç”»: {ninja_A}â†’AC1+AC2, {ninja_B}â†’AC3, {ninja_C}â†’AC4
  ä¾å­˜é–¢ä¿‚: AC3ã¯AC1å®Œäº†å¾Œ(blocked_by)
```
1åé…å‚™æ™‚ã¯F006ä¾‹å¤–æ¡ä»¶ã®ç†ç”±ã‚’æ˜è¨˜ã™ã‚‹ã“ã¨ã€‚

## Â§7 ã‚¿ã‚¹ã‚¯YAMLè–„æ›¸ããƒ«ãƒ¼ãƒ«ï¼‹æ›¸ãè¾¼ã¿ãƒ«ãƒ¼ãƒ«
> task YAMLã«ã¯project:ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ›¸ã‘ã°å¿è€…ãŒè‡ªå‹•çŸ¥è­˜å›å¾©ã™ã‚‹ãŸã‚ã€æ—¢å­˜çŸ¥è­˜ã®é‡è¤‡è¨˜è¼‰ä¸è¦ã€‚

### è–„æ›¸ããƒ«ãƒ¼ãƒ«
task YAMLã«æ›¸ããª: âœ— DBæ¥ç¶šå…ˆ / âœ— trade-ruleè¦ç´„ / âœ— UUIDä¸€è¦§ / âœ— éå»ã®å¤±æ•—æ•™è¨“ / âœ— ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆï¼ˆå…¨ã¦projects.yaml/lessons.yaml/context.mdã«è¨˜è¼‰æ¸ˆã¿ï¼‰
task YAMLã«æ›¸ãã®ã¯: âœ“ ä½•ã‚’ã‚„ã‚‹ã‹ / âœ“ å—å…¥åŸºæº–(acceptance_criteria) / âœ“ ãã®ã‚¿ã‚¹ã‚¯å›ºæœ‰ã®æƒ…å ±
```yaml
# Beforeï¼ˆæ‚ªã„ä¾‹ï¼‰
description: |
  æœ¬ç•ªDBã¯PostgreSQL on Render...DM2(UUID: f8d70415-...)...
  éå»ã«cmd_079ã§SQLiteã«èª¤æ¥ç¶šã—ãŸæ•™è¨“ãŒã‚ã‚‹ã®ã§æ³¨æ„...
# Afterï¼ˆè‰¯ã„ä¾‹ï¼‰
project: dm-signal
description: |
  DM2ã®pipeline_configã‚’BBãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å½¢å¼ã«æ›´æ–°ã—ã€
  å†è¨ˆç®—å¾Œã®ã‚·ã‚°ãƒŠãƒ«ã‚’trade-rule.mdã§æ¤œè¨¼ã›ã‚ˆã€‚
```

### YAMLæ›¸ãè¾¼ã¿ãƒ«ãƒ¼ãƒ«ï¼ˆRead-before-Writeï¼‰
Claude Codeã¯Readæœªå®Ÿæ–½ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®Write/Editã‚’æ‹’å¦ã™ã‚‹ã€‚
```
âœ… æ­£ã—ã„æ‰‹é †: 1. Read â†’ 2. Write/Edit
âŒ ã‚¨ãƒ©ãƒ¼: Write without Read â†’ "File has not been read yet"
```
é©ç”¨ç®‡æ‰€: Step 3aâ†’3b/11aâ†’11b(dashboard.md) / Step 6aâ†’6b(tasks YAML) / Step 11.7(streaks.yaml) / Step 11.5 Unblock(tasks YAML) / /clear Protocol(tasks YAML) / inboxæ—¢èª­åŒ–(`inbox_mark_read.sh`çµŒç”±ã€Edit toolç¦æ­¢)

## Â§8 Pre-Deployment Pingï¼ˆé…å‚™å‰ç¢ºèªï¼‰
> é…å‚™å¯¾è±¡ãƒšã‚¤ãƒ³ãŒå¿œç­”ã—ã¦ã„ã‚‹ã‹ç¢ºèªã€‚å¿œç­”ãªã—å¿è€…ã¸ã®é…å‚™ã¯ã‚¿ã‚¹ã‚¯åœæ»ã‚’æ‹›ãã€‚

```bash
tmux capture-pane -t shogun:2.{pane_index} -p | tail -5
```
| ç¢ºèªçµæœ | å¯¾å¿œ |
|---------|------|
| `â¯` ãŒå«ã¾ã‚Œã‚‹ | **é…å‚™OK** |
| `â¯` ãŒãªã„ | **é…å‚™ã—ãªã„** â†’ åˆ¥å¿è€…ã‚’é¸æŠ â†’ dashboard.mdã«è¨˜éŒ² |

| ã‚¿ã‚¤ãƒŸãƒ³ã‚° | å¿…é ˆ/ä»»æ„ |
|-----------|----------|
| åˆå›é…å‚™ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹å¾Œã®åˆã‚¿ã‚¹ã‚¯ï¼‰ | **å¿…é ˆ** |
| 2å›ç›®ä»¥é™ï¼ˆå‰ã‚¿ã‚¹ã‚¯å®Œäº†å¾Œã®å†é…å‚™ï¼‰ | ä»»æ„ |
| å‰å›é…å‚™å¤±æ•—ã—ãŸå¿è€…ã¸ã®å†é…å‚™ | **å¿…é ˆ** |

## Â§9 SayTask Notifications ï¼‹ Eat the Frog
> cmdå®Œäº†ãƒ»å¤±æ•—ãƒ»è¦å¯¾å¿œã®é€šçŸ¥ã¨ã€ä»Šæ—¥æœ€é›£ã‚¿ã‚¹ã‚¯(Frog)ã®ç®¡ç†ã€‚

### Notification Triggers

| Event | When | Message Format |
|-------|------|----------------|
| cmd complete | å…¨ã‚µãƒ–ã‚¿ã‚¹ã‚¯å®Œäº† | `âœ… cmd_XXX å®Œäº†ï¼({N}ã‚µãƒ–ã‚¿ã‚¹ã‚¯) ğŸ”¥é€£å‹è¡—é“{current}æ—¥ç›®` |
| Frog complete | frogã‚¿ã‚¹ã‚¯å®Œäº† | `âš”ï¸ æ•µå°†æ‰“ã¡å–ã£ãŸã‚Šï¼cmd_XXX å®Œäº†ï¼...` |
| Subtask failed | status: failed | `âŒ subtask_XXX å¤±æ•— â€” {reason, max 50 chars}` |
| cmd failed | å…¨å®Œäº†+ä¸€éƒ¨å¤±æ•— | `âŒ cmd_XXX å¤±æ•— ({M}/{N}å®Œäº†, {F}å¤±æ•—)` |
| Action needed | ğŸš¨è¿½åŠ æ™‚ | `ğŸš¨ è¦å¯¾å¿œ: {heading}` |
| Frog selected | Frogè‡ªå‹•/æ‰‹å‹•é¸æŠ | `ğŸ‘¹ èµ¤é¬¼å°†è»: {title} [{category}]` |
| VF task complete | SayTaskå®Œäº† | `âœ… VF-{id}å®Œäº† {title} ğŸ”¥é€£å‹è¡—é“{N}æ—¥ç›®` |
| VF Frog complete | VF Frogå®Œäº† | `âš”ï¸ æ•µå°†æ‰“ã¡å–ã£ãŸã‚Šï¼{title}` |

| ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | ç”¨é€” | ä½¿ã„åˆ†ã‘ |
|-----------|------|---------|
| `ntfy_cmd.sh` | cmdé–¢é€£é€šçŸ¥ï¼ˆå®Œäº†ãƒ»å¤±æ•—ãƒ»é€²æ—ï¼‰ | purposeã‚’è‡ªå‹•ä»˜åŠ ã€‚cmd_idãŒã‚ã‚‹é€šçŸ¥ã¯å…¨ã¦ã“ã¡ã‚‰ |
| `ntfy.sh` | cmdä»¥å¤–ï¼ˆå¾©å¸°ãƒ»ğŸš¨è¦å¯¾å¿œãƒ»VFç­‰ï¼‰ | cmd_idãŒãªã„ä¸€èˆ¬é€šçŸ¥ç”¨ |

`config/settings.yaml` ã« `ntfy_topic` ãŒãªã‘ã‚Œã°å…¨é€šçŸ¥ã‚’é»™ã£ã¦ã‚¹ã‚­ãƒƒãƒ—ã€‚

### cmd Completion Checkï¼ˆStep 11.7ï¼‰
```
1. Get parent_cmd of completed subtask
2. Check all subtasks: grep -l "parent_cmd: cmd_XXX" queue/tasks/*.yaml | xargs grep "status:"
3. Not all done â†’ skip
4. All done â†’ review_gate.sh â†’ cmd_complete_gate.sh
5. GATE CLEARå¾Œ: purpose validation â€” shogun_to_karo.yamlã®purposeã‚’å†èª­ã—
   deliverables vs purposeæ¯”è¼ƒã€‚æœªé”æˆãªã‚‰doneåŒ–ã›ãšè¿½åŠ ã‚µãƒ–ã‚¿ã‚¹ã‚¯ or dashboard ğŸš¨
6. Purpose validated â†’ streaksæ›´æ–° â†’ ntfyé€šçŸ¥
```

### ãƒ•ãƒ©ã‚°ãƒ™ãƒ¼ã‚¹ã‚²ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ 

| ãƒ•ãƒ©ã‚° | å‡ºåŠ›å…ƒ | å¿…é ˆ/æ¡ä»¶ä»˜ã |
|--------|--------|-------------|
| `archive.done` | `archive_completed.sh` | **å…¨cmdå¿…é ˆ** |
| `lesson.done` | `lesson_write.sh` / `lesson_check.sh` | **å…¨cmdå¿…é ˆ** |
| `review_gate.done` | `review_gate.sh` | implementæ™‚ |
| `report_merge.done` | `report_merge.sh` | reconæ™‚ |

å®¶è€ã®cmdå®Œäº†ãƒ•ãƒ­ãƒ¼: æ•™è¨“ãƒ¬ãƒ“ãƒ¥ãƒ¼(lesson.done) â†’ archive_completed.sh(archive.done) â†’ cmd_complete_gate.sh â†’ GATE CLEAR or BLOCK

### Eat the Frogï¼ˆtoday.frogï¼‰
Frog = ä»Šæ—¥ã®æœ€é›£ã‚¿ã‚¹ã‚¯ã€‚cmd subtask ã‹ VF task ã®ã„ãšã‚Œã‹ã€‚

| | cmd subtask | SayTask task |
|---|------------|--------------|
| è¨­å®š | cmdå—é ˜å¾Œï¼ˆæœ€é›£ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’é¸ã¶ï¼‰ | è‡ªå‹•é¸æŠï¼ˆæœ€é«˜priorityâ†’æœŸé™è¿‘â†’ä½œæˆå¤ï¼‰ |
| ä¸Šæ›¸ã | å½“æ—¥1ä»¶ã®ã¿ã€‚ä¸Šæ›¸ãç¦æ­¢ | manual overrideã‚ã‚Š |
| å®Œäº† | âš”ï¸é€šçŸ¥ + today.frog="" | åŒå·¦ |
| å„ªå…ˆ | Frogã‚¿ã‚¹ã‚¯ã‚’å…ˆã«é…å‚™ | â€” |

**ç«¶åˆ**: å…ˆç€å„ªå…ˆã€‚cmd Frog vs VF Frogã€1æ—¥1ä»¶ã®ã¿ã€‚

### Streaks.yamlçµ±åˆã‚«ã‚¦ãƒ³ãƒˆï¼ˆcmd + VFï¼‰
```yaml
streak: { current: 13, last_date: "2026-02-06", longest: 25 }
today: { frog: "VF-032", completed: 5, total: 8 }  # cmd+VFåˆç®—
```

| Field | Formula |
|-------|---------|
| `today.total` | cmd subtasks (today) + VF tasks (due=today OR created=today) |
| `today.completed` | cmd subtasks (done) + VF tasks (done) |
| `streak.current` | last_date=todayâ†’keep, yesterdayâ†’+1, elseâ†’reset to 1 |

æ›´æ–°: cmdå®Œäº†(Step 11.7) â†’ `today.completed` += 1 (per cmd, not per subtask)ã€‚VFå®Œäº†æ™‚ã‚‚åŒæ§˜ã€‚

### ğŸ‘¹èµ¤é¬¼å°†è» Dashboard Template
```markdown
## ğŸ‘¹ èµ¤é¬¼å°†è» / ğŸ”¥ é€£å‹è¡—é“
| é …ç›® | å€¤ |
|------|-----|
| ä»Šæ—¥ã®Frog | {VF-xxx or subtask_xxx} â€” {title} |
| FrogçŠ¶æ…‹ | ğŸ‘¹ æœªè¨ä¼ / âš”ï¸ æ•µå°†æ‰“ã¡å–ã£ãŸã‚Š |
| é€£å‹è¡—é“ | ğŸ”¥ {current}é€£å‹ (æœ€é•·: {longest}é€£å‹) |
| ä»Šæ—¥ã®å®Œäº† | {completed}/{total}ï¼ˆcmd: {cmd_count} + VF: {vf_count}ï¼‰ |
| VFã‚¿ã‚¹ã‚¯æ®‹ã‚Š | {pending_count}ä»¶ï¼ˆã†ã¡ä»Šæ—¥æœŸé™: {today_due}ä»¶ï¼‰ |
```
dashboard.mdæ›´æ–°æ™‚ã«æ¯å›ã“ã®ç¯€ã‚’æœ€ä¸Šéƒ¨ï¼ˆã‚¿ã‚¤ãƒˆãƒ«å¾Œã€é€²è¡Œä¸­å‰ï¼‰ã«é…ç½®ã€‚

## Â§10 DBæ’ä»–é…å‚™ãƒ«ãƒ¼ãƒ«
> æœ¬ç•ªDBã«è² è·ã‚’ã‹ã‘ã‚‹ã‚¿ã‚¹ã‚¯ã¯ç›´åˆ—é…å‚™ã€‚ä¸¦åˆ—ã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ã‚¨ãƒ©ãƒ¼ã®åŸå› ï¼ˆå®Ÿè¨¼æ¸ˆã¿ï¼‰ã€‚

| ç›´åˆ—å¿…é ˆï¼ˆDB-heavyï¼‰ | ä¸¦åˆ—OKï¼ˆDBéä¾å­˜ï¼‰ |
|--------------------|-----------------|
| ãƒ‘ãƒªãƒ†ã‚£æ¤œè¨¼(recalculate) | ã‚³ãƒ¼ãƒ‰ä¿®æ­£ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† |
| æœ¬ç•ªPFç™»éŒ²ãƒ»ã‚·ã‚°ãƒŠãƒ«å†è¨ˆç®— | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆãƒ»åˆ†æ |
| å¤§é‡DBèª­å–ã‚Š(å…¨PFÃ—å…¨æ—¥ä»˜) | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° |

é‹ç”¨: (1) DBæ“ä½œã‚¿ã‚¹ã‚¯2ä»¶ä»¥ä¸Š â†’ `blocked_by`ã§ç›´åˆ—åŒ– (2) ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã¯ä¸¦åˆ—ã€DBæ“ä½œãƒ•ã‚§ãƒ¼ã‚ºã ã‘ç›´åˆ— (3) ä¾‹: å¿è€…AãŒDBæ“ä½œä¸­ â†’ å¿è€…Bã¯ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã¾ã§é€²ã‚ã¦DBæ“ä½œã¯blocked

## Â§11 Parallelizationï¼ˆä¸¦åˆ—åŒ–ï¼‰
> idleå¿è€…â‰¥2 AND ç‹¬ç«‹ã‚¿ã‚¹ã‚¯ã‚ã‚Š â†’ ä¸¦åˆ—é…å‚™ã¯ç¾©å‹™ã€‚éŠä¼‘å¿è€…ã¯ãƒªã‚½ãƒ¼ã‚¹ã®æå¤±ã€‚

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ä¾‹ |
|---------|-----|
| cmdé–“ä¸¦åˆ— | cmd_043â†’å¿è€…A + cmd_044â†’å¿è€…Bï¼ˆåŒæ™‚é…å‚™ï¼‰ |
| cmdå†…ä¸¦åˆ— | cmd_040 AC1â†’å¿è€…A + AC2â†’å¿è€…B + AC3â†’å¿è€…C |

| Condition | Decision |
|-----------|----------|
| Multiple output files / Independent items | Split and parallelize |
| Previous step needed for next | Use `blocked_by` |
| Same file write required | Single ninja (RACE-001) |
| idleå¿è€… â‰¥ 2 AND independent tasks exist | **MUST parallelize** |

1 ninja = 1 taskã€‚2-3åæŠ•å…¥ãŒæ¨™æº–ã€‚1åã«å…¨ACä¸¸æŠ•ã’ã¯F006é•åã€‚Dependent tasks â†’ sequential with `blocked_by`ã€‚

## Â§12 Report Scanningï¼ˆé€šä¿¡æ–­çµ¶å®‰å…¨ç¶²ï¼‰
> æ¯å›èµ·å‹•æ™‚ã«å…¨`queue/reports/{ninja_name}_report_{cmd}.yaml`ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã€‚dashboard.mdã¨ç…§åˆã—æœªåæ˜ ã®å ±å‘Šã‚’å‡¦ç†ã€‚é…å»¶inboxå¯¾ç­–ã€‚ï¼ˆæ—§å½¢å¼`{ninja_name}_report.yaml`ã¯éæ¨å¥¨ï¼‰

## Â§13 å®¶è€èµ·æ¡ˆãƒ•ãƒ­ãƒ¼ï¼ˆscout_only cmdå®Œäº†å¾Œï¼‰
> åµå¯Ÿå®Œäº†å¾Œã€å®¶è€ãŒåµå¯Ÿå ±å‘Šã‚’è‡ªã‚‰åˆ†æã—æ¬¡cmdã‚’ç›´æ¥èµ·æ¡ˆã™ã‚‹ã€‚
> åµå¯Ÿæ™‚ã®é–: æ®¿â†’å°†è»â†’å®¶è€â†’å¿è€…(åµå¯Ÿ)â†’å®¶è€(èµ·æ¡ˆ+é…å‚™)â†’å¿è€…(å®Ÿè£…)

```
scout_only cmdå®Œäº†å¾Œã®ãƒ•ãƒ­ãƒ¼:
  1. å®¶è€: åµå¯Ÿå ±å‘Šã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆreport YAMLç›´æ¥èª­å–ï¼‰
  2. å®¶è€: GATEãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã«åµå¯Ÿå ±å‘Šã‚’åˆ†æã—æ¬¡cmdã‚’ç›´æ¥èµ·æ¡ˆ
  3. å®¶è€: shogun_to_karo.yaml ã« impl cmd ã‚’è¿½è¨˜
     - scout_exempt: trueï¼ˆåµå¯Ÿæ¸ˆã¿ã®ãŸã‚ï¼‰
     - based_on: cmd_XXXï¼ˆåµå¯Ÿcmdã®IDï¼‰
  4. å®¶è€: impl cmdã‚’é…å‚™ï¼ˆdeploy_task.shï¼‰
```

| ã‚¹ãƒ†ãƒƒãƒ— | æ‹…å½“ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | é€šä¿¡æ‰‹æ®µ |
|---------|------|-----------|---------|
| 1 | å®¶è€ | åµå¯Ÿå ±å‘Šãƒ¬ãƒ“ãƒ¥ãƒ¼ | report YAMLç›´æ¥èª­å– |
| 2 | å®¶è€ | åµå¯Ÿå ±å‘Šåˆ†æ+æ¬¡cmdèµ·æ¡ˆ | report YAML + contextèª­å–ï¼ˆå®¶è€è‡ªèº«ãŒè¡Œã†ï¼‰ |
| 3 | å®¶è€ | impl cmdæ›¸è¾¼ã¿ | `shogun_to_karo.yaml` ã«è¿½è¨˜ï¼ˆscout_exempt: true, based_on: cmd_XXXï¼‰ |
| 4 | å®¶è€ | é…å‚™ | deploy_task.sh |

## Â§14 ãƒ¢ãƒ‡ãƒ«åˆ¥èƒ½åŠ›ï¼ˆ2026-02-27ç²¾å¯†åˆ†æï¼‰

> è¨ˆæ¸¬ãƒãƒ¼ã‚¸ãƒ§ãƒ³: Opus=claude-opus-4-6, Codex=codex-mini-latest
> æ¨è«–ãƒ¬ãƒ™ãƒ«: Opus=default, Codex=default
> âš ï¸ ãƒ¢ãƒ‡ãƒ«æ›´æ–°ãƒ»æ¨è«–ãƒ¬ãƒ™ãƒ«å¤‰æ›´æ™‚ã¯ `model_analysis.sh --detail` ã§å†æ¤œè¨¼å¿…é ˆ

| è»¸ | Opus | Codex |
|----|------|-------|
| implement CLEARç‡ | 85.7% (N=7) | 100% (N=6) |
| impl+recon CLEARç‡ | 97.8% (N=45) | 100% (N=16) |
| recon CLEARç‡ | 100% (N=7) | 100% (N=7) |
| BLOCKé–¢ä¸/å¿è€… | 13.75å› | 5.5å› |
| ã‚³ã‚¹ãƒˆ | x5.0 | x0.2 |
| ç‰¹æ€§ | è‡ªåŠ›åˆ¤æ–­åŠ›ãŒå¼·ã„ã€‚è¤‡é›‘ãªè¨­è¨ˆåˆ¤æ–­ã«é©æ€§ | ç´ ç›´ã§æŒ‡ç¤ºé€šã‚Šã€‚BLOCKæœ€å°‘ã€‚å®šå‹ã€œä¸­é›£åº¦ã«æœ€é© |

### é…å‚™æŒ‡é‡
- è¨­è¨ˆåˆ¤æ–­ãƒ»è¤‡é›‘ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ Opuså„ªå…ˆ
- å®šå‹å®Ÿè£…ãƒ»åµå¯Ÿãƒ»ãƒ«ãƒ¼ãƒ«è¿½è¨˜ â†’ Codexå„ªå…ˆ
- ã‚³ã‚¹ãƒˆæ„è­˜: Codex1å› = Opus 1/25ã€‚è¿·ã£ãŸã‚‰Codexã§è©¦è¡Œ
- âš ï¸ ã“ã®æ•°å€¤ã¯ç¾è¡Œãƒãƒ¼ã‚¸ãƒ§ãƒ³æ™‚ç‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
- âš ï¸ ãƒ¢ãƒ‡ãƒ«æ›´æ–°æ™‚ã¯ `model_analysis.sh --detail` ã§å†æ¤œè¨¼å¿…é ˆ
- âš ï¸ æ¨è«–ãƒ¬ãƒ™ãƒ«(reasoning effort)ã§ã‚‚èƒ½åŠ›ã¯å¤‰ã‚ã‚‹ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³+æ¨è«–ãƒ¬ãƒ™ãƒ«ã‚’ã‚»ãƒƒãƒˆã§è¨˜éŒ²ã›ã‚ˆ

## Â§15 é…å‚™ãƒ«ãƒ¼ãƒ«ï¼ˆ2026-02-27æ®¿è£å®š: ãƒ©ãƒ³ãƒ€ãƒ é…å‚™ï¼‰

### åŸå‰‡
- idleå¿è€…ã«round-robinã§é…å‚™ã™ã‚‹ã€‚ãƒ¢ãƒ‡ãƒ«ãƒ»åå‰ã§é¸ã°ãªã„
- å…¨å¿è€…ãŒå…¨ç¨®åˆ¥(recon/impl/review)ã‚’æ‹…å½“ã§ãã‚‹
- å®¶è€ã¯ã€Œèª°ã«æŒ¯ã‚‹ã‹ã€ã§åˆ¤æ–­ã—ãªã„ã€‚idleã®å…ˆé ­ã‹ã‚‰é †ã«æŒ¯ã‚‹

### round-robiné †åº
deploy_task.shãŒ idleå¿è€…ãƒªã‚¹ãƒˆ(karo_snapshot.txtã‹ã‚‰å–å¾—)ã®å…ˆé ­ã‹ã‚‰é †ã«å‰²ã‚Šå½“ã¦ã‚‹ã€‚ç‰¹å®šãƒ¢ãƒ‡ãƒ«ã¸ã®åã‚Šã‚’æ§‹é€ çš„ã«æ’é™¤ã€‚

### ä¾‹å¤–ï¼ˆã“ã‚Œã ã‘ã¯å®ˆã‚‹ï¼‰
- DBæ’ä»–: æœ¬ç•ªDBæ“ä½œã¯ç›´åˆ—é…å‚™ï¼ˆä¸¦åˆ—ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå®Ÿè¨¼æ¸ˆã¿ï¼‰
- åµå¯Ÿ2åä¸¦åˆ—: ç‹¬ç«‹2åãŒæ¨™æº–ï¼ˆ1åä¾‹å¤–ã¯äº‹å‰çŸ¥è­˜ååˆ†ãªå ´åˆã®ã¿ï¼‰
- ãƒ¬ãƒ“ãƒ¥ãƒ¼è€…â‰ å®Ÿè£…è€…: åŒä¸€äººç‰©ã«ã‚ˆã‚‹ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¦æ­¢

### bloom_levelå»ƒæ­¢
æ—§: bloom L4ä»¥ä¸Šâ†’joninå¿…é ˆã€L3ä»¥ä¸‹â†’geninå¯
æ–°: åŒºåˆ¥ãªã—ã€‚å…¨å¿è€…ãŒå…¨ãƒ¬ãƒ™ãƒ«ã®ã‚¿ã‚¹ã‚¯ã‚’æ‹…å½“

### ãƒ‡ãƒ¼ã‚¿è“„ç©
- gate_metrics.logã«ãƒ¢ãƒ‡ãƒ«å+task_typeãŒè¨˜éŒ²ã•ã‚Œã‚‹ï¼ˆcmd_413ã§æ•´å‚™æ¸ˆã¿ï¼‰
- model_analysis.sh --detailã§å®šæœŸçš„ã«æ¤œè¨¼
- é¸æŠãƒã‚¤ã‚¢ã‚¹ãªã—ã®ç´”ç²‹ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚Šã€ãƒ¢ãƒ‡ãƒ«é–“æ¯”è¼ƒã®ä¿¡é ¼æ€§ãŒå‘ä¸Š

## Â§16 CLIç¨®åˆ¥åˆ‡æ›¿æ‰‹é †ï¼ˆClaudeâ†”Codexç­‰ï¼‰

> settings.yamlå¤‰æ›´ã ã‘ã§ã¯å®ŸCLIã¯åˆ‡ã‚Šæ›¿ã‚ã‚‰ãªã„ã€‚åˆ¥ãƒã‚¤ãƒŠãƒªã®ãŸã‚ä»¥ä¸‹ã®æ‰‹é †ãŒå¿…é ˆã€‚

### å‰æçŸ¥è­˜
- Claude Code = `claude` ãƒã‚¤ãƒŠãƒªï¼ˆOpus/Sonnetï¼‰
- OpenAI Codex = `codex`(`node`) ãƒã‚¤ãƒŠãƒª
- `/clear` ã¯CLIå†…ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒªã‚»ãƒƒãƒˆã®ã¿ã€‚CLIç¨®åˆ¥ã¯å¤‰ã‚ã‚‰ãªã„
- `/model` ã¯Claude CLIå†…ã®ãƒ¢ãƒ‡ãƒ«åˆ‡æ›¿ã€‚Codexã«ã¯éå¯¾å¿œ

### æ‰‹é †ï¼ˆå®¶è€â†’å°†è»ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¦ã€‚å®¶è€è‡ªèº«ã§å®Ÿè¡Œå¯èƒ½ï¼‰
```
1. settings.yaml ã® cli.agents.{å¿è€…å}.type ã‚’å¤‰æ›´ï¼ˆä¾‹: claude â†’ codexï¼‰
2. å¯¾è±¡ãƒšã‚¤ãƒ³ã®CLIã‚’çµ‚äº†
   â†’ Claude: tmux send-keys -t "shogun:2.{pane}" C-cï¼ˆ2å›ã€é–“éš”2ç§’ï¼‰
   â†’ Codex: tmux send-keys -t "shogun:2.{pane}" C-cï¼ˆ2å›ã€é–“éš”2ç§’ï¼‰
3. æ–°CLIã‚’èµ·å‹•ï¼ˆcli_profiles.yamlã®launch_cmdå‚ç…§ï¼‰
   â†’ Claude: tmux send-keys -t "shogun:2.{pane}" "claude --dangerously-skip-permissions" Enter
   â†’ Codex: tmux send-keys -t "shogun:2.{pane}" "codex --dangerously-bypass-approvals-and-sandbox --no-alt-screen" Enter
4. tmuxå¤‰æ•°æ›´æ–°
   â†’ tmux set-option -p -t "shogun:2.{pane}" @model_name "{è¡¨ç¤ºå}"
   â†’ tmux set-option -p -t "shogun:2.{pane}" @agent_cli "{cli_type}"
   â†’ tmux select-pane -t "shogun:2.{pane}" -T "{è¡¨ç¤ºå}"
5. tmux capture-pane ã§èµ·å‹•ç¢ºèªï¼ˆidleãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºã‚’ç¢ºèªï¼‰
```

### ç¢ºèªæ–¹æ³•
```bash
tmux list-panes -t shogun:2 -F '#{pane_index} #{@agent_id} #{@model_name} #{@agent_cli} #{pane_current_command}'
```
claude â†’ `claude`ã€codex â†’ `node` ãŒpane_current_commandã«è¡¨ç¤ºã•ã‚Œã‚‹
